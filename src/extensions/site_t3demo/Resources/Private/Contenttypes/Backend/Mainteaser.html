<html
	xmlns:core="http://typo3.org/ns/TYPO3/CMS/Core/ViewHelpers"
	data-namespace-typo3-fluid="true"
>
<a href="{editLink.url -> f:format.raw()}" title="{editLink.title}">
	<strong><f:translate key="LLL:EXT:site_t3demo/Resources/Private/Language/locallang_db.xlf:CType.mainteaser.name" /></strong><br>
	<f:if condition="{allImages}">
		<f:variable name="numberOfMediaAssets" value="{allImages -> f:count()}" />
				<f:variable name="numberOfVisibleImages" value="0" />
		<f:for each="{allImages}" as="image">
			<f:if condition="!{image.hidden}">
				<f:variable name="imageIsVisible" value="true" />
				<f:variable name="numberOfVisibleImages" value="{numberOfVisibleImages + 1}" />
			</f:if>
			<span class="b_ce__thumbnail-wrapper {f:if(condition: '{numberOfMediaAssets} > 1', else: 'b_ce__thumbnail-wrapper--single')}">
				<f:image src="{image.uid}" height="64" treatIdAsReference="1"
								 class="b_ce__thumbnail {f:if(condition:image.hidden, then: 'b_ce__thumbnail--hidden')}" />
				<f:image src="{image.uid}" height="64" treatIdAsReference="1" cropVariant="desktop"
								 class="b_ce__thumbnail {f:if(condition:image.hidden, then: 'b_ce__thumbnail--hidden')}" />
				<f:image src="{image.uid}" height="64" treatIdAsReference="1" cropVariant="desktop-xl"
								 class="b_ce__thumbnail {f:if(condition:image.hidden, then: 'b_ce__thumbnail--hidden')}" /><br>
				<f:if condition="{image.description}">
					<f:then>
						{image.description}
					</f:then>
					<f:else if="{image.originalFileMetaData.description}">
						{image.originalFileMetaData.description}
					</f:else>
				</f:if>
			</span>
		</f:for>
	</f:if>

	<br>
	{bodytext -> f:format.raw()}

	<f:if condition="{link}">
		<br>
		<strong>Link to {f:uri.typolink(parameter: link, absolute: true)}</strong>
	</f:if>

	<f:if condition="!{imageIsVisible} && !{hidden}">
		<p><strong class="b_ce__warning"><core:icon identifier="exclamation-circle" size="small" />
			<f:translate key="LLL:EXT:site_t3demo/Resources/Private/Language/locallang_db.xlf:pageLayoutView.noImageVisible" /></strong></p>
	</f:if>
	<f:if condition="{numberOfVisibleImages} > 1  && !{hidden}">
		<p><strong class="b_ce__warning"><core:icon identifier="exclamation-circle" size="small" />
			<f:translate key="LLL:EXT:site_t3demo/Resources/Private/Language/locallang_db.xlf:pageLayoutView.onlyFirstImageInUse" /></strong></p>
	</f:if>

</a>
</html>


